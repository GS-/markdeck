version: "3.2"

services:
  converter:
    image: "arne/markdeck-pandoc:0.22"
    volumes:
      - type: bind
        source: ./
        target: /source
        read_only: true
      - type: bind
        source: ./deck
        target: /target

  webserver:
    image: "arne/markdeck-liveserver:0.1"
    ports:
      - "8080:8080"
    volumes:
      - type: bind
        source: ./deck
        target: /target
    depends_on: [converter]

  pdfexporter:
    image: "arne/markdeck-decktape:0.1"
    volumes:
      - type: bind
        source: ./deck
        target: /slides
    shm_size: 1G
    depends_on: [converter, webserver]

  helper:
    image: "arne/markdeck-helper:0.1"
    ports:
      - "8081:8081"
