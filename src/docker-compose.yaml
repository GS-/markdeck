version: "3.2"

services:
  converter:
    build:
      context: .
      dockerfile: Dockerfile.pandoc
      args:
        version: 0.22
        motto: impress-ive bundle, again
    image: "arne/markdeck-pandoc:0.22"
    volumes:
      - type: bind
        source: ./
        target: /source
        read_only: true
      - type: bind
        source: ./deck
        target: /target

  webserver:
    build:
      context: .
      dockerfile: Dockerfile.liveserver
    image: "arne/markdeck-liveserver:0.1"
    ports:
      - "8080:8080"
    volumes:
      - type: bind
        source: ./deck
        target: /target
    depends_on: [converter]
#
#  pdfexporter:
#    build:
#      context: .
#      dockerfile: Dockerfile.decktape
#    image: "arne/markdeck-decktape:0.1"
#    volumes:
#      - type: bind
#        source: ./deck
#        target: /slides
#    shm_size: 1G
#    depends_on: [converter, webserver]
#
#  helper:
#    build:
#      context: .
#      dockerfile: Dockerfile.helper
#    image: "arne/markdeck-helper:0.1"
#    ports:
#      - "8081:8081"
#
#  standaloneexporter:
#    build:
#      context: .
#      dockerfile: Dockerfile.standalone
#    image: "arne/markdeck-standalone:0.1"
#    volumes:
#      - type: bind
#        source: ./deck
#        target: /target
#    depends_on: [converter]

  a2sketchconverter:
    build:
      context: .
      dockerfile: Dockerfile.a2sketch
    image: "arne/markdeck-a2sketch:0.1"

